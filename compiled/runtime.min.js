!function(a,b){"use strict";var c=function(a){return a.GLOBAL_OBJECT_TRACE_ID=1,a.RETURN_VALUE_ID="$ ret",a}({}),d=-1,e=0,f=1,g=0,h=1,i=2,j=new Array(3);j[g]="This hints at a bug caused earlier.",j[h]="This may be a bug.",j[i]="This may be inadvertly hiding a bug.";var k=[[e,"An arithmetic expression of type '{3}' produced a non-numeric or non-finite result","Expression: '{1} {3} {2} => {0}'",g],[e,"An arithmetic expression of type '{3}' on non-numeric or non-finite operands produced a finite result.","Expression: '{1} {3} {2} => {0}'",i],[f,"Attempted to call a non-callable expression","Function Expression: '{3}  is {0}'",g],[e,"Adding arrays causes their string representations to be conatenated","Left array: '{1}, right array: {2}'",h],[e,"String concatenation involes an object operand without a proper string conversion","Expression: '{1} {3} {2} => {0}'",h],[e,"Operand of arithmetic expression is a string that gets auto-parsed as number","Expression: '{1} {3} {2} => {0}'",g],[e,"Function called with too many arguments","Expected {0} arguments but received {1}. Function: {2}",h]],l="Jsane ",m=function(a){("E"==a[0]?console.error:console.log)(l+a)},n=m,o=function(a,b,c,e){var g=k[a],h=g[0],i=g[1],l=g[2],m=g[3];if(h!==d){var o=A(i,b),p=A(l,b),q=j[m],r=A("{0}{1}: {2}\n	{3}\n	Category: {4}\n",[h===f?"E":"W",a,o,p,q]);if(t(c)||t(e)||(r+="\nTrace+\n	"+s.getTraceLines(c,e).join("\n	")),n(r),h===f)throw new Error("jsane ERROR: "+i)}},p=function(a){return!y(a)&&!x(a)},q=function(){var a=c.GLOBAL_OBJECT_TRACE_ID+1;return function(){return a++}},r=function(){var a="___jsane_trace_id",b=(1,eval)("this"),c=Object.prototype.hasOwnProperty,d=Object.getOwnPropertyNames,e=function(){var b=function(b){return b===a?!1:c.call(this,b)},e=function(b){var c=d.call(this,b),e=c.indexOf(a);return-1!==e&&c.splice(e,1),c};Object.prototype.hasOwnProperty=b,Object.getOwnPropertyNames=e,b.toString=function(){return"function hasOwnProperty() { [native code] }"},e.toString=function(){return"function getOwnPropertyNames() { [native code] }"}},f=function(){Object.getOwnPropertyNames=d,Object.prototype.hasOwnProperty=c},g=function(b,c){return b===a?!1:b in c},h=function(d){if(u(d))return d;if(d===b)return GLOBAL_OBJECT_TRACE_ID;var e=d[a];if("undefined"==typeof e||!c.call(d,a)){var e=q();Object.defineProperty(d,a,{value:e,enumerable:!1,configurable:!1,writable:!1})}return e};return{getObjectTraceId:h,proxyInOperator:g,setupObjectHooks:e,clearObjectHooks:f}}(),s=function(){var a={},c=[],d=null,e=function(a,b,c){this.rhs=a,this.rhs_scope_id=b,this.rhs_id=c},f=function(a){this.entries={},this.function_call_id=a},g=function(b,f,i,j,k){var l=i instanceof e?i:new e(i,j,k);if(a[b+"."+f]=l,console.log("global trace: ["+b+","+f+"] = "+i+" [ "+j+","+k+"]"),null===j&&d){for(var m=k,n=[],o=c.length-1;o>=0;){var p=h(m,o);if(t(p))break;if(n.push([m,p]),null!==p.rhs_scope_id)break;u(p.rhs_id)&&--o,m=p.rhs_id}if(n.length>0)for(var q=n[n.length-1][1],r=n.length-1;r>=0;--r){var m=n[r][0],i=n[r][1].rhs,s=m,v=n[r][1].rhs_scope_id;l=new e(i,q.rhs_scope_id,q.rhs_id),g(v,s,l),q=l}}},h=function(a,b){return b=t(b)?c.length-1:b,c[b].entries[a]},i=function(a,b,c,d){console.log("local trace: "+a+" = "+b+" ["+c+","+d+"]")},j=function(){return d},k=function(){return d=new f(q()),c.push(d),d},l=function(){c.pop(),d=c[c.length-1]},m=function(a,c,d){for(var f=c.entries,g=a.entries,h=0,i=d.length;i>h;++h){var j=f[h];if(!j)break;p(j.rhs)&&(g[d[h]]=j)}for(;i>h;++h)g[d[h]]=new e(b,null,null)},n=function(){return["haha"]};return{traceGlobal:g,traceLocal:i,pushLocalTraceScope:k,popLocalTraceScope:l,getLocalTraceScope:j,connectArgumentTraces:m,getTraceLines:n}}(),t=function(a){return"undefined"==typeof a},u=function(a){return"number"==typeof a},v=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},w=function(a){return"string"==typeof a||a instanceof String},x=function(a){return null!==a&&"object"==typeof a},y=function(a){return u(a)&&isFinite(a)},z=function(a){return a.toString===Object.prototype.toString},A=function(a,b){for(var c=0;c<b.length;++c)a=a.replace("{"+c+"}",b[c]);return a},B=function(){var a=Object.prototype.toString,b=Function.prototype.toString,c=/^\[object .+?Constructor\]$/,d=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(e){var f=typeof e;return"function"==f?d.test(b.call(e)):e&&"object"==f&&c.test(a.call(e))||!1}}();a.info=function(){return"JSane runtime library, v0.1"},a.setPrintFunc=function(a){n=a===b?m:a},a.chkArith=function(a,b,c,d,e,f,g,h,i){if("+"===d){if(x(b)&&z(b)||x(c)&&z(c))return o(4,arguments),a;if(v(b)&&v(c))return o(3,arguments),a;if(w(a))return a}else if(w(b)||w(c))return o(5,arguments),a;if(!y(b)||!y(c)){var j=f,k=g;y(c)||(j=h,k=i),y(a)?o(1,arguments,j,k):o(0,arguments,j,k)}return a},a.chkCall=function(){var a=Function.prototype.toString;return function(b,c,d){if(b||o(2,arguments),d.length>b.length){for(var e=b.length;e<d.length&&t(d[e]);++e);if(e<d.length){var f=a.call(b);/\barguments\b/.test(f)||/\beval\b/.test(f)||B(b)||o(6,[b.length,d.length,f.length>200?f.substring(0,200):f])}}var g=b.apply(c,d);return g}}(),a.assign=function(a,b,c,d,e){return(p(a)||null===b&&u(c))&&(null===d||w(d)||(d=r.getObjectTraceId(d)),null===b||w(b)||(b=r.getObjectTraceId(b)),null===b?s.traceLocal(c,a,d,e):s.traceGlobal(b,c,a,d,e)),a},a.enterFunc=function(a){var b=s.getLocalTraceScope();if(b){var c=s.pushLocalTraceScope();return s.connectArgumentTraces(c,b,a),c.function_call_id}},a.leaveFunc=function(){s.popLocalTraceScope()},a.proxyInOperator=r.proxyInOperator,a.undo=function(){r.clearObjectHooks();var a=(1,eval)("this");if(a!==this)for(var b in a)a[b]===this&&delete a[b]},r.setupObjectHooks()}("undefined"==typeof exports?this.__rt={}:exports);